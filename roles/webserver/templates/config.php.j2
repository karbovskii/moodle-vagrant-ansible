<?php  // Moodle configuration file

unset($CFG);
global $CFG;
$CFG = new stdClass();

$CFG->dbtype    = 'mariadb';
$CFG->dblibrary = 'native';

$CFG->dbhost    = '{{ moodle_db_host }}';
$CFG->dbname    = '{{ moodle_db_name }}';
$CFG->dbuser    = '{{ moodle_db_user }}';
$CFG->dbpass    = '{{ moodle_db_pass }}';

$CFG->prefix    = 'mdl_';
$CFG->dboptions = array (
    'dbpersist' => 0,
    'dbport' => 3306,
    'dbsocket' => '',
    'dbcollation' => 'utf8mb4_unicode_ci',
);

$CFG->wwwroot   = '{{ wwwroot }}';
$CFG->dataroot  = '/var/moodledata';
$CFG->admin     = 'admin';

$CFG->directorypermissions = 0777;

# BEGIN ANSIBLE MANAGED MEMCACHED CONFIG
// Memcached session handler
$CFG->session_handler_class = '\core\session\memcached';
$CFG->session_memcached_save_path = 'tcp://{{ moodle_db_host }}:11211';
// Optional: caching (advanced, can be done via UI)
# END ANSIBLE MANAGED MEMCACHED CONFIG

require_once(__DIR__ . '/lib/setup.php');
